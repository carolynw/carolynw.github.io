!function(e,t,i,n,a,s){"use strict";!function(){n(function(){sageApp.modules.initAll()})}(),function(){function i(e){var t=n(e).val();return!a.isUndefined(t)&&""!==t}function s(i){if(n(i).is(":hidden"))return!1;var a=i.getBoundingClientRect(),s=Math.max(t.documentElement.clientHeight,e.innerHeight);return a.top>=0&&a.bottom<s}function r(i){if(n(i).is(":hidden"))return!1;var a=i.getBoundingClientRect(),s=Math.max(t.documentElement.clientHeight,e.innerHeight);return a.top>=0&&a.top<s||a.bottom>=0&&a.bottom<s}n.extend(n.expr[":"],{inView:s,inPartialView:r,hasValue:i})}(),function(){function t(e,t,i){this.name=e,this.factory=i,this.dependencies=t,this.instance=null}function i(){this._registry=new Map}var n=e.sageApp=e.sageApp||{};a.extend(t.prototype,function(){function e(){if(null===this.instance){var e=n.services.get(this.dependencies);this.instance=this.factory.apply(this,e)}return this.instance}return{getInstance:e}}()),a.extend(i.prototype,function(){function e(e,i,n){if(!a.isUndefined(this._registry.get(e)))throw"Module with name '"+e+"' already registered";a.isUndefined(n)&&(n=i,i=[]),this._registry.set(e,new t(e,i,n))}function i(e){return this._registry.get(e).instance}function s(){this._registry.forEach(function(e){try{e.getInstance().init()}catch(e){n.services.get("logger").logError(e)}})}return{register:e,get:i,initAll:s}}()),n.modules=new i}(),function(){function t(e,t,i){this.name=e,this.factory=i,this.dependencies=t,this.instance=null}function i(){this._registry=new Map}var n,s=e.sageApp=e.sageApp||{};a.extend(t.prototype,function(){function e(){if(null===this.instance){var e=n.get(this.dependencies);this.instance=this.factory.apply(this,e)}return this.instance}return{getInstance:e}}()),a.extend(i.prototype,function(){function e(e,i,n){if(!a.isUndefined(this._registry.get(e)))throw"Service with name '"+e+"' already registered";a.isUndefined(n)&&(n=i,i=[]),this._registry.set(e,new t(e,i,n))}function i(e){var t=this;return a.isArray(e)?a.map(e,function(e){return t.get(e)}):t._registry.get(e).getInstance()}return{register:e,get:i}}()),n=s.services=new i}(),function(){e.getUrlParameter=function(t){for(var i=decodeURIComponent(e.location.search.substring(1).toLowerCase()),n=i.split("&"),a=0;a<n.length;a++){var s=n[a].split("=");if(s[0]===t.toLowerCase())return void 0===s[1]?"":s[1].replace(/\+/g," ")}}}(),sageApp.services.register("ajax",["logger"],function(e){function t(e){return e.contentType=e.contentType||"application/json; charset=utf-8",e.dataType=a.isUndefined(e.dataType)?"json":e.dataType,"json"!==e.dataType.toLowerCase()||a.isString(e.data)||(e.data=JSON.stringify(e.data)),i(e).then(function(t){return"json"===e.dataType.toLowerCase()?t.responseJSON:t})}function i(t){return s.promise(function(i,a){n.ajax(t).then(function(e,t,n){delete n.then,i(n)},function(i,n,s){e.logError(t),e.logError(s),delete i.then,a(i)})})}return{request:t}}),sageApp.services.register("logger",function(){function e(e){console.log(e)}function t(e){console.warn(e)}function i(e){console.error(e)}return{logInfo:e,logWarn:t,logError:i}}),sageApp.services.register("search",["ajax"],function(e){function t(t){var i=this.urls.autocomplete;return t&&(i+="/"+encodeURI(t)),e.request({url:i})}function i(){if(null!==n)return s.when(n);var t=this.urls.suggestedSearches;return e.request({url:t}).then(function(e){return n=e,e})}var n=null;return{urls:{suggestedSearches:""},getAutoCompleteResults:t,getSuggestedSearches:i}}),sageApp.services.register("vueTemplates",function(){function t(e){return i.get(e)}var i=new Map;return a.each(e._templatesTemp,function(e,t){i.set(t,e)}),delete e._templatesTemp,{get:t}}),sageApp.modules.register("accordion",function(){function e(){n("[data-accordion]").on("shown.bs.collapse",t)}function t(e){var t=n(e.target).parent(".panel").not(":inView");if(t.length){var i=n("body").data("top-offset")||0;i+=5,n("html,body").animate({scrollTop:t.offset().top-i},500)}}return{init:e}}),sageApp.modules.register("accounting",function(){function e(){setTimeout(function(){n("#phone_fan, .accounting-module").addClass("open")},500)}return{init:e}}),sageApp.modules.register("articles",function(){function i(){if(n(".article-list").on("afterChange",function(e){a()}),n(".article-list .article-panel").length>=4)s(),a();else if(3===n(".article-list .article-panel").length)r(3),a();else if(2===n(".article-list .article-panel").length){n(".article-list .article-panel").width("30%").css("display","inline-block");var t,i=!1;n(e).width()<=992&&(i=!0,o(),a()),n(e).on("resize",function(s){clearTimeout(t),t=setTimeout(function(){n(e).width()<=992?(i=!0,o(),a()):i&&n(".article-list").slick("unslick")},250)})}else{n(".article-list .article-panel").width("60%").css("display","inline-block"),n(".article-list .article-panel .panel-heading").css("min-height","0"),n(".article-list .article-panel .panel-body a").removeClass("button-block");var t;n(e).width()<=769&&n(".article-list .article-panel .panel-heading").css("min-height","275px"),n(e).width()<=375&&n(".article-list .article-panel").width("100%"),n(e).on("resize",function(i){clearTimeout(t),t=setTimeout(function(){n(e).width()<=769?n(".article-list .article-panel .panel-heading").css("min-height","275px"):n(".article-list .article-panel .panel-heading").css("min-height","0"),n(e).width()<=375?n(".article-list .article-panel").width("100%"):n(".article-list .article-panel").width("60%")},250)})}}function a(){setTimeout(function(){n(".article-list .article-panel").each(function(){0===n(t).find("#"+n(this).attr("aria-describedby")).length&&n(this).removeAttr("aria-describedby")})},250)}function s(){r(4)}function r(e){n(".article-list").slick({dots:!0,infinite:!1,speed:300,slidesToShow:e,slidesToScroll:e,arrows:!1,variableWidth:!1,responsive:[{breakpoint:769,settings:{focusOnSelect:!1,arrows:!1,centerMode:!1,slidesToShow:2,slidesToScroll:2,initialSlide:1,dots:!0}},{breakpoint:375,settings:{focusOnSelect:!1,centerMode:!1,slidesToShow:1,slidesToScroll:1,initialSlide:1,centerPadding:"40px",dots:!0,arrows:!1}}]})}function o(){n(".article-list").slick({responsive:[{breakpoint:992,settings:{infinite:!1,speed:300,focusOnSelect:!1,arrows:!1,centerMode:!1,slidesToShow:2,slidesToScroll:2,initialSlide:1,dots:!0}},{breakpoint:375,settings:{focusOnSelect:!1,centerMode:!1,slidesToShow:1,slidesToScroll:1,initialSlide:1,centerPadding:"40px",dots:!0,arrows:!1}}]})}return{init:i}}),sageApp.modules.register("cookieBanner",["ajax"],function(e){function i(){var i=n("#cookie-banner");i.length&&n(t).on("click",".cookie-banner-close",function(t){t.preventDefault(),e.request({url:"/api/sitecore/Banners/CloseCookieMessage",dataType:""}).then(function(){i.hide()})})}return{init:i}}),sageApp.modules.register("customerStories",function(){function e(){try{return Sitecore.PageModes.PageEditor}catch(e){return!1}}function t(){if(n(".button-white.play").length){n("#customer_story_tab_carousel").find(".item").each(function(){var t="#"+n(this).attr("id");n(this).find(".button-white.play").each(function(){n(this).click(function(i){i.preventDefault(),e()||n(this).closest(".carousel").carousel("pause");var a=n(t+" .video-container").data("videoid"),s='<iframe class="" width="100%" height="420" src="https://www.youtube.com/embed/'+a+'?rel=0&autoplay=1&enablejsapi=1" frameborder="0" allowfullscreen></iframe>';n(t+" .video-container").find("iframe").length?n(t+" iframe")[0].contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"):n(t+" .video-container").append(s),n(t+" .hide-on-play").addClass("hidden"),n(t+" .show-on-play").removeClass("hidden"),n("ol.carousel-indicators").addClass("hidden"),n(t+" .proper-focus").removeClass("proper-focus").addClass("blurred")})}),n(this).find(".button-white.back").each(function(){n(this).click(function(i){i.preventDefault(),e()||n(this).closest(".carousel").carousel("cycle"),n(t+" .hide-on-play").removeClass("hidden"),n(t+" .show-on-play").addClass("hidden"),n("ol.carousel-indicators").removeClass("hidden"),n(t+" .blurred").removeClass("blurred").addClass("proper-focus"),n(t+" iframe")[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})})})}}return{init:t}}),sageApp.modules.register("drawerNav",function(){function e(){r=n("#drawer-nav"),r.length&&t()}function t(){n("body").on("click.drawer-nav-vis","[data-drawer-nav='open']",i).on("click.drawer-nav-vis","[data-drawer-nav='close']",a),r.on("click",".sections .section-title",function(e){e.preventDefault(),n(e.target).closest("li").toggleClass("open")})}function i(e){e.preventDefault(),n(e.delegateTarget).on("click.drawer-nav-autohide",s).addClass("drawer-nav-open"),r.addClass("open")}function a(e){e.preventDefault(),n(e.delegateTarget).off("click.drawer-nav-autohide").removeClass("drawer-nav-open"),r.removeClass("open")}function s(e){n(e.target).is("#drawer-nav, #drawer-nav *")||a(e)}var r;return{init:e}}),sageApp.modules.register("dynamicPricing",function(){function e(){n("[data-dynamic-pricing]").on("click.cycle","[data-cycle-change]",t).on("click.users","[data-users-change]",i).on("change.office","[data-office-change]",s)}function t(e){e.preventDefault(),n(e.delegateTarget).find("[data-cycle-change]").removeClass("active"),n(e.target).addClass("active"),n(e.delegateTarget).find(".product-panel").each(function(t,i){var a=n(i),s=a.data("current-price");o(a,r(a,{users:s.users,office365:s.office365,annual:n(e.target).data("cycle-change")}))})}function i(e){e.preventDefault();var t=n(e.target).closest(".product-panel"),i=t.data("current-price"),a=n(e.target).data("users-change");o(t,r(t,{users:a,office365:i.office365,annual:i.annual})),t.find("[data-users-button]").text(a+" user"+(a>1?"s":""))}function s(e){var t=n(e.target).closest(".product-panel"),i=t.data("current-price"),a=n(e.target).is(":checked");o(t,r(t,{users:i.users,office365:a,annual:i.annual}))}function r(e,t){var i=e.data("prices"),n={};return n.actual=a.find(i,function(e){return e.users===t.users&&e.annual===t.annual&&e.office365===t.office365}),n.sibling=a.find(i,function(e){return e.users===t.users&&e.annual===t.annual&&e.office365!==t.office365}),n}function o(e,t){var i=t.actual;if(i){var n=i.annual?"/ year":"/ month";i.superScript&&(n+=" <sup>"+i.superScript+"</sup>"),e.data("current-price",i),e.find("[data-users]").html(i.users+" user"+(i.users>1?"s":"")),e.find("[data-price] .product-price-value").html(i.price.toFixed(2).replace(".00")),e.find("[data-cycle]").html(n),e.find("[data-url]").attr("href",i.buyNowUrl).attr("target",i.buyNowLinkTarget),e.find("[data-office-text]").text(i.office365Text),i.office365Text&&t.sibling&&t.sibling.office365!==i.office365?e.find("[data-office-visible]").show():e.find("[data-office-visible]").hide()}}return{init:e}}),sageApp.modules.register("footerSearch",["typeAheadFactory"],function(e){function t(){n("#footer-search").length&&e.create("#footer-search")}return{init:t}}),sageApp.modules.register("form",function(){function e(){if(n("form[data-wffm]").length){var e=n("form[data-wffm] .form-group input:not([type=radio])"),t=n("form[data-wffm] .form-group select");e.each(function(){n(this).focusin(function(){var e=n(this).prev("label.control-label");e&&(n(this).addClass("onFocus"),e.addClass("onFocus"))}),n(this).focusout(function(){var e=n(this).prev("label.control-label");e&&(n(this).removeClass("onFocus"),e.removeClass("onFocus"))})}),t.each(function(){n(this).focusin(function(){var e=n(this).prev("label.control-label");e&&(n(this).addClass("onFocus"),e.addClass("onFocus"))}),n(this).focusout(function(){var e=n(this).prev("label.control-label");e&&(n(this).removeClass("onFocus"),e.removeClass("onFocus"))})})}else{if(!n(".request-form").length)return;var i=n(".request-form .form-group input:not([type=radio])"),a=n(".request-form .form-group select");i.each(function(){n(this).focusout(function(){n(this).val()?n(this).addClass("filled"):n(this).removeClass("filled")})}),a.each(function(){n(this).focusout(function(){n(this).val()?n(this).addClass("filled"):n(this).removeClass("filled")})})}}return{init:e}}),sageApp.modules.register("funnelbackAnalytics",function(){function e(){i()}function i(){n(t).on("click.funnelbackAnalytics","[data-funnelback-analytics]",function(e){var t=n(e.currentTarget).data("funnelback-analytics");t&&n.get(t)})}return{init:e}}),sageApp.modules.register("googleAnalytics",function(){function i(){a.isArray(e.dataLayer)&&(s(),r(),o())}function s(){n(t).on("click.googleAnalytics","[data-track='gaevent'] a",function(e){c({event:"gaevent",eventCategory:n(e.currentTarget).closest("[data-track='gaevent']").data("track-category"),eventAction:n(e.currentTarget).data("title")||n(e.currentTarget).text(),eventLabel:n(e.currentTarget).attr("href")})})}function r(){n(t).on("click.googleAnalytics","a.button, a.button-primary, a.button-secondary, a.button-tertiary",function(e){var t=n(e.currentTarget),i=t.attr("class").split(/\s+/);c({event:"gaevent",eventCategory:"cta-"+a.find(i,function(e){return"button"===e.toLowerCase().substr(0,6)}),eventAction:n(e.currentTarget).data("title")||n(e.currentTarget).text(),eventLabel:n(e.currentTarget).attr("href")})})}function o(){n(t).on("submit.googleAnalytics","form[data-wffm]",function(e){var t=n(e.currentTarget);c({event:"gaevent",eventCategory:"Form submission",eventAction:"",eventLabel:t.attr("action"),formDetails:{elqSiteID:l(t,"elqSiteID"),elqFormName:l(t,"elqFormName"),country:l(t,"country"),campaignID:l(t,"campaignID"),product:l(t,"product"),content:l(t,"content")}})})}function l(e,t){var i=e.find("label:contains('"+t+"')");if(i.length){var n=e.find("input#"+i.attr("for"));if(n.length)return n.val()}}function c(t){console.log(t),e.dataLayer.push(t)}return{init:i}}),sageApp.modules.register("headerSearch",["typeAheadFactory"],function(t){function i(){var i=n("#header-search");if(i.length){var a=i.hasClass("force"),r=t.create("#header-search",{isInitiallyVisible:a,searchTerm:e.getUrlParameter("searchTerm")});a||s(r)}}function s(t){t.onShow=function(){function e(e){!n(e.target).is("#header-search .bar, #header-search .bar *")&&(t.isVisible=!1)}t.isTypeAheadEnabled=!1,setTimeout(function(){n("#header-search").find("input[name='searchTerm']").focus(),t.isTypeAheadEnabled=!0},500),n("body").on("click.header-search-close",e).addClass("no-scroll").scrollTop(0)},t.onHide=function(){n("#header-search").find("input[name='searchTerm']").blur(),n("body").off("click.header-search-close").removeClass("no-scroll")},n("body").on("click.header-search-open","[data-header-search='open']",function(e){e.preventDefault(),t.isVisible=!0}),n(e).resize(a.throttle(r,100)),r()}function r(){var e=n("#header-nav").height();n("#header-search").css("height","calc(100% - "+e+"px)")}return{init:i}}),sageApp.modules.register("headerSticky",function(){function i(){g=n("#header-sticky"),g.length&&(g.on("click.header-sticky-nav","[data-toggle-nav-bar]",c),"disabled"!==g.data("stickiness")&&s())}function s(){r(),n(e).resize(a.throttle(r,100)),n(e).scroll(a.throttle(r,100))}function r(){o(),l()}function o(){n("[data-sticky-header-hider]:inPartialView").length>0?g.addClass("no-vis"):g.removeClass("no-vis")}function l(){var e=g.find(">.sticky-content").height();n("body").data("top-offset",e),g[0].getBoundingClientRect().top<0?g.addClass("sticky").height(e):g.removeClass("sticky").height("auto")}function c(e){n(e.delegateTarget).find(".nav-bar").hasClass("open")?d(e):u(e)}function u(e){e.preventDefault(),e.stopPropagation(),n(e.delegateTarget).find("[data-toggle-nav-bar]").addClass("open"),n(e.delegateTarget).find("[data-nav-bar]").addClass("open"),n("body").on("click.header-sticky-nav-autoclose",f),n(t).on("scroll.header-sticky-nav-autoclose",p())}function d(e){e.preventDefault(),e.stopPropagation(),n(e.delegateTarget).find("[data-toggle-nav-bar]").removeClass("open"),n(e.delegateTarget).find("[data-nav-bar]").removeClass("open"),n("body").off("click.header-sticky-nav-autoclose"),n(t).off("scroll.header-sticky-nav-autoclose")}function f(e){!n(e.target).is("#header-sticky .nav-bar .nav-bar-content, #header-sticky .nav-bar .nav-bar-content *")&&d(e)}function p(){function e(e){var s=n(t).scrollTop();a+=Math.abs(s-i),i=s,a>500&&d(e)}var i=n(t).scrollTop(),a=0;return e}var g;return{init:i}}),sageApp.modules.register("lightBox",function(){function t(){n("[data-light-box-images]").css({cursor:"pointer"}),n("body").on("click","[data-light-box-images]",function(t){if(n(e).width()>991){s(n(".active",n(t.currentTarget)))}}),n(e).resize(a.throttle(function(){i()},100))}function i(){var e=n("#lightBoxOverlay");e.length>0&&e.removeClass("show")}function s(e){var t=n("#lightBoxOverlay");if(t.length>0){var i=e.attr("data-light-box-image");n("img",t).attr("src",i);var a=n(e).parent();if(n("[data-light-box-image]",a).length>1){var s=[];n("[data-light-box-image]",a).each(function(e,t){s.push(n(t).attr("data-light-box-image"))});var o=s.indexOf(i);n(".lb-left",t).off().on("click",function(e){e.stopPropagation(),o--,o<0&&(o=s.length-1),n("img",t).attr("src",s[o])}),n(".lb-right",t).off().on("click",function(e){e.stopPropagation(),o++,o>s.length-1&&(o=0),n("img",t).attr("src",s[o])}),n(".lb-button",t).removeAttr("style")}else n(".lb-button",t).css("display","none");t.css("height","100%").addClass("show")}else r(e)}function r(e){var t=n("<div id='lightBoxOverlay'></div>"),a=n("<a class='closeLightBox'></a>"),r=n("<div class='lightImageHolder'></div>"),o=n("<img />");o.addClass("img-responsive"),r.append(o),o.on("click",function(e){e.stopPropagation()}),t.on("transitionend",function(){n(this).hasClass("show")||n(this).height(0)}),a.on("click",i),t.on("click",i),r.append(a);var l=n("<a class='lb-button'></a>"),c=l.clone(),u=l.clone();c.addClass("lb-left"),u.addClass("lb-right"),t.append(r),t.append(c),t.append(u),n(".lb-button",t).css("display","none"),n("body").append(t),setTimeout(function(){s(e)},1)}return{init:t}}),sageApp.modules.register("matchHeight",function(){function e(){n("[data-match-height]").matchHeight()}return{init:e}}),sageApp.modules.register("misc",function(){function e(){t()}function t(){i.on("click","[data-toggle-css-class]",function(e){e.preventDefault();var t=n(this),i=t.attr("data-toggle-css-class"),a=t.attr("data-toggle-css-target");if(""!==i&&""!==a)switch(a){case"::next":t.next().toggleClass(i);break;default:n(a).toggleClass(i)}}),i.on("click","[data-toggle='collapse'][data-sage-parent]",function(e){var t=n(e.currentTarget).attr("data-sage-parent");i.find(t).collapse("toggle")})}var i=n("body");return{init:e}}),sageApp.modules.register("officeMap",function(){function e(){var e=n(t).find(".office-list .office");if(e.length){for(var i=[],a=0;a<e.length;a++){var s=e[a],r="<div class='map-info'> <p>"+n(s).attr("data-office-name")+"</p><p>"+n(s).attr("data-office-address")+"</p> </div>";i.push([r,n(s).attr("data-latitude"),n(s).attr("data-longitude"),a+1])}var o,l,c=new google.maps.Map(t.getElementById("map"),{center:new google.maps.LatLng(i[0][1],i[0][2])}),u=new google.maps.LatLngBounds;for(l=0;l<i.length;l++){o=new google.maps.Marker({position:new google.maps.LatLng(i[l][1],i[l][2]),map:c}),u.extend(o.getPosition());var d=new google.maps.InfoWindow;google.maps.event.addListener(o,"click",function(e,t){return function(){d.setContent(i[t][0]),d.open(c,e)}}(o,l))}c.fitBounds(u)}}return{init:e}}),sageApp.modules.register("partners",function(){function e(){i(),t()}function t(){n("[data-case-study-filter]").click(function(){n.Topic("case-study-filter").publish(n(this).data("case-study-filter"))})}function i(){n(".partner-filter").slick({dots:!0,infinite:!1,speed:300,slidesToShow:5,centerMode:!1,variableWdith:!1,slidesToScroll:5,responsive:[{breakpoint:960,settings:{focusOnSelect:!1,centerMode:!1,slidesToShow:3,slidesToScroll:3,centerPadding:"40px",dots:!0,arrows:!1}},{breakpoint:720,settings:{focusOnSelect:!1,centerMode:!1,slidesToShow:2,slidesToScroll:2,centerPadding:"40px",dots:!0,arrows:!1}},{breakpoint:480,settings:{focusOnSelect:!0,centerMode:!1,slidesToShow:1,slidesToScroll:1,centerPadding:"40px",dots:!0,arrows:!1}}]})}var a={};return n.Topic=function(e){var t,i=e&&a[e];return i||(t=n.Callbacks(),i={publish:t.fire,subscribe:t.add,unsubscribe:t.remove},e&&(a[e]=i)),i},{init:e}}),sageApp.modules.register("persistentUTM",function(){function i(){var e=["utm_source","utm_medium","utm_content","utm_campaign","utm_term","gclid"];r(s(e)),o(e),a()}function a(){n("form[data-wffm] input[type='email']:hasValue").prop("disabled",!0),n("form[data-wffm]").on("click","[data-clear-form]",function(e){e.preventDefault();var t=n(e.delegateTarget);t.find("input[type='email']").prop("disabled",!1).val(""),t.find("input[type='text']").val(""),t.find("textarea").val(""),t.find("input[type='checkbox']").prop("checked",!1),t.find("input[type='file']").val(""),t.find("input[type='password']").val(""),t.find("select option:first-child").prop("selected","selected"),t.find("input[type='tel']").val("")})}function s(t){var i,n=decodeURIComponent(e.location.search.substring(1)),a=n.split("&"),s=new Array;for(var r in t)for(var o=t[r],l=0;l<a.length;l++)if(i=a[l].split("="),i[0]===o){if(void 0===i[1])break;s.push(i[0]+"="+i[1]+",");break}return s}function r(i){var n="";if(i.length>0){for(var a=0;a<i.length;a++)n+=i[a];t.cookie="UTMParams="+n+";path=/;domain="+e.location.hostname.toLowerCase()}}function o(e){var t=l("UTMParams");if(""!==t)for(var i=t.split(","),a=0;a<i.length;a++){var s=i[a].split("=");if(e.indexOf(s[0])>-1){for(var r="",o=n("form[data-wffm] .hidden label"),c=0;c<o.length;c++){var u=o[c].innerHTML;if(u===s[0]){r=n("input.form-control[id='"+n(o[c]).attr("for")+"']");break}}void 0!==r&&r.val(s[1])}}}function l(e){for(var i=e+"=",n=t.cookie.split(";"),a=0;a<n.length;a++){for(var s=n[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(i))return s.substring(i.length,s.length)}return""}return{init:i}}),sageApp.modules.register("pricing",function(){function i(){var t=n(".sage-pricing-options");t.length>0&&(n(".pricing-module-results-list").on("afterChange breakpoint",s),n(e).on("resize",a.throttle(function(){r(t)},250)),c(t),r(t),s())}function s(){a.delay(function(){n(".pricing-module-results-list .product-panel").each(function(){0===n(t).find("#"+n(this).attr("aria-describedby")).length&&n(this).removeAttr("aria-describedby")})},250)}function r(e){var t=e.find(".product-panel .panel"),i=o(t,".panel-heading"),s=o(t,".panel-body-content"),l=o(t,".cta-container");if(0==s||0==i||0==e.find(".product-panel").width())return void a.delay(function(){r(e)},100);a.each(t,function(e){n(e).find(".panel-heading").height(i),n(e).find(".panel-body-content").height(s),n(e).find(".cta-container").height(l)})}function o(e,t){var i=a.max(e,function(e){return n(e).find(t).css("height","auto"),n(e).find(t).height()});return n(i).find(t).height()}function l(t){n(e).width()<=992&&n(e).width()>769?$component.find(".product-panel").width("40%").css("margin","0 auto"):n(e).width()<=769&&n(e).width()>525?$component.find(".product-panel").width("60%").css("margin","0 auto"):n(e).width()<=525&&n(e).width()>375?$component.find(".product-panel").width("80%").css("margin","0 auto"):n(e).width()<=375?$component.find(".product-panel").width("auto").css("margin","0 10px"):$component.find(".product-panel").width("30%").css("margin","0 auto")}function c(t){var i=t.find(".product-panel").length,s=!1;i>3&&(i=3,s=!0),i>1?t.find(".pricing-module-results-list").slick({dots:s,infinite:!1,speed:300,slidesToShow:i,slidesToScroll:i,arrows:!1,responsive:[{breakpoint:767,settings:{focusOnSelect:!0,centerMode:!0,centerPadding:"120px",slidesToShow:1,slidesToScroll:1,initialSlide:1}},{breakpoint:600,settings:{focusOnSelect:!0,centerMode:!0,centerPadding:"80px",slidesToShow:1,slidesToScroll:1,initialSlide:1}},{breakpoint:376,settings:{focusOnSelect:!0,centerMode:!0,centerPadding:"30px",slidesToShow:1,slidesToScroll:1,initialSlide:1}}]}):(l(t),n(e).on("resize",a.throttle(function(){l(t)},250)))}return{init:i}}),sageApp.modules.register("productFilter",function(){function i(){n(".filter-module-results-list").on("breakpoint",s),n(t).on("click",h+" ."+v,function(e){e.preventDefault(),l(e.currentTarget)}),n(t).on("click",h+" .product-select-icon",function(e){e.preventDefault(),u()});var i=n(".filter-module-results-list");i.length>0&&(n(e).on("resize",a.throttle(function(){r(i)},250)),g(),r(i),s())}function s(){a.delay(function(){n(".filter-module-results-list .product-panel").each(function(){0===n(t).find("#"+n(this).attr("aria-describedby")).length&&n(this).removeAttr("aria-describedby")})},250)}function r(e){var t=e.find(".product-panel .front, .product-panel .back"),i=o(t,".panel-body-content"),s=o(t,".call-button"),l=o(t,".panel-heading","back"),c=o(t,".panel-heading","front");if(0==i||0==l||0==c||0==e.find(".product-panel").width())return void a.delay(function(){r(e)},100);var u=l-c,d=0;a.each(t,function(e){var t=n(e),a=i;t.find(".call-button").height(s),t.hasClass("front")?(t.find(".panel-body-content").height(a-u),t.find(".panel-heading").height(l)):(t.find(".panel-body-content").height(a),t.find(".panel-heading").height(c));var r=t.height();d<r&&(n(".filter-module-results-list .product-panel").height(r),d=r)})}function o(e,t,i){var s=a.max(e,function(e){return i&&n(e).hasClass(i)?0:(n(e).find(t).css("height","auto"),n(e).find(t).height())});return Math.ceil(n(s).find(t).height())}function l(e){var t=n(e).attr("data-filter-attribute");t&&(n(e).toggleClass(m),c(t))}function c(e){var t=n.inArray(e,b);-1===t?b.push(e):b.splice(t,1),p()}function u(){n(h+" .product-panel").toggleClass(m),n(h+" .product-panel").find(".icon-select-text, .product-select-icon").toggleClass(m)}function d(){for(var e=w[0].score,t=w[0].id,i=C,a=y.length;a--;)y[a].mostPopular&&""===i&&(i=y[a].id,C=i);if(""===i&&(i=y[0].id),n(h+" .product-panel .panel-pre-heading").html(""),n(h+" [data-mob-prod-id]").removeClass("most-popular recommended"),n(h+" [data-desktop-prod-id]").removeClass("most-popular recommended"),e<1)n(h+" [data-desktop-prod-id="+i+"]").addClass("most-popular"),n(h+" [data-mob-prod-id="+i+"]").addClass("most-popular"),n(h+" .product-panel[data-mob-prod-id="+i+"] .panel-pre-heading").html("Most popular");else{n(h+" [data-desktop-prod-id="+t+"]").addClass("recommended"),n(h+" [data-mob-prod-id="+t+"]").addClass("recommended"),n(h+" .product-panel[data-mob-prod-id="+t+"] .panel-pre-heading").html("Recommended");var s=n(h+" .product-panel[data-mob-prod-id="+t+"]").attr("data-slick-index");n(".filter-module-results-list").slick("slickGoTo",s)}}function f(e){for(var t=0,i=b.length;i--;)-1!==e.indexOf(b[i])&&t++;return t}function p(){y=[],w=[],n(h+" .product-panel").each(function(){var e=n(this).attr("data-filter-attributes").split("|"),t=f(e);y.push({id:n(this).attr("data-mob-prod-id"),score:t,price:n(this).attr("data-price"),mostPopular:n(this).hasClass("most-popular"),features:e})}),y.sort(function(e,t){return t.score-e.score});var e=y[0].score;w.push(y[0]);for(var t=1;t<=y.length-1&&y[t].score===e;t++)w.push(y[t]);w.length>1&&w.sort(function(e,t){return e.price-t.price}),d()}function g(){n(h).each(function(e,t){var i=n(t),a=i.find(".product-panel").length,s=!1;a>3&&(a=3,s=!0),i.find(".filter-module-results-list").first().slick({dots:s,infinite:!1,speed:300,slidesToShow:a,slidesToScroll:a,arrows:!1,responsive:[{breakpoint:992,slidesToScroll:1,settings:{focusOnSelect:!0,centerMode:!0,centerPadding:"180px",slidesToShow:1,slidesToScroll:1,initialSlide:1}},{breakpoint:767,settings:{focusOnSelect:!0,centerMode:!0,centerPadding:"20px",slidesToShow:1,slidesToScroll:1,initialSlide:1}}]})})}var h=".filter-module-content:not(.partners)",v="product-filter-icon-wrapper",m="active",b=[],y=[],w=[],C="";return{init:i}}),sageApp.modules.register("productImages",function(){function e(){n(t).find(".device-nav").each(function(){n(this).closest(".feature-row").addClass("with-nav")}),n("[data-product-images]").on("click.product-images-nav","[data-product-image-nav]",i)}function i(e){e.preventDefault();var t=n(e.currentTarget);if(!t.hasClass("active")){var i=n(e.delegateTarget);i.find("[data-product-image-nav]").removeClass("active"),t.addClass("active");var a=t.data("product-image-nav");i.find(".product-example img").removeClass("active"),i.find(".product-example img."+a).addClass("active")}}return{init:e}}),sageApp.modules.register("responsiveTableWrapper",function(){function e(){n("*:not(.table-responsive) > .table").each(function(e,t){n(t).wrap("<div class='table-responsive'></div>")})}return{init:e}}),sageApp.modules.register("solutions",function(){function e(){n(t).on("click",r,function(e){e.preventDefault(),s(e.currentTarget)}),n(t).on("click",".solution-trig.active",function(e){e.preventDefault(),a()}),i()}function i(){n(".solution-filter").slick({dots:!0,infinite:!1,speed:300,slidesToShow:4,centerMode:!1,variableWdith:!1,slidesToScroll:4,responsive:[{breakpoint:960,settings:{focusOnSelect:!1,centerMode:!1,slidesToShow:3,slidesToScroll:3,initialSlide:1,centerPadding:"40px",dots:!0,arrows:!1}},{breakpoint:720,settings:{focusOnSelect:!1,centerMode:!1,slidesToShow:2,slidesToScroll:2,initialSlide:1,centerPadding:"40px",dots:!0,arrows:!1}},{breakpoint:480,settings:{focusOnSelect:!0,centerMode:!1,slidesToShow:1,slidesToScroll:1,initialSlide:1,centerPadding:"40px",dots:!0,arrows:!1}}]})}function a(){n(".solution-trig").removeClass("active").removeClass("inactive")}function s(e){n(e).closest("div.border-top-bottom").hasClass(o)?n(r).each(function(){n(this).closest("div.border-top-bottom").removeClass(l).removeClass(o)}):(n(r).each(function(){n(this).closest("div.border-top-bottom").addClass(l).removeClass(o)}),n(e).closest("div.border-top-bottom").removeClass(l).addClass(o))}var r=".widget-placeholder-inner.solution",o="active",l="inactive";return{init:e}}),sageApp.modules.register("support",function(){function t(){s.length&&i()}function i(){n("#customerZone > #accordion .panel").on("shown.bs.collapse",function(){var t=e.location.hash,i=n(t).offset();a.animate({scrollTop:i.top})})}var a=n("body"),s=n("#customerZone");return{init:t}}),sageApp.modules.register("swapper",function(){function e(){t(),i()}function t(){n("body").on("swap","[data-swapper]",a)}function i(){n("[data-swapper][data-swapper-filter]").each(function(){var e=n(this);n.Topic(e.data("swapper-filter")).subscribe(function(t){var i=n.Event("swap");i.payload={Filters:[t]},e.trigger(i)})})}function a(e){var t=e.baseUrl||n(e.target).data("swapper");n.ajax({method:"POST",url:t,data:JSON.stringify({Data:e.payload}),context:e.target,contentType:"application/json; charset=utf-8"}).done(s)}function s(e){n(this).html(e.Data)}return{init:e}}),sageApp.modules.register("switcher",function(){function e(){n(t).on("click",c+" "+u+" ul > li > a",function(e){e.preventDefault(),o(e.currentTarget)}),n(t).on("click",c+" "+d+" ul > li > a",function(e){e.preventDefault(),r(e.currentTarget)}),n(t).on("click",c+" "+d+" li.btnNext ,"+c+" "+u+" li.btnNext",function(e){var t=n(e.currentTarget).parent("ul").find("li."+p);e.preventDefault(),t.next("li").find("a").trigger("click"),l(n(e.currentTarget).closest("ul").attr("id"))}),n(t).on("click",c+" "+d+" li.btnPrevious ,"+c+" "+u+" li.btnPrevious",function(e){var t=n(e.currentTarget).parent("ul").find("li."+p);e.preventDefault(),t.prev("li").find("a").trigger("click"),l(n(e.currentTarget).closest("ul").attr("id"))}),n(c).length&&n(c).find(u+" > ul, "+d+" > ul").each(function(){l(n(this).attr("id"))})}function i(e){n(e).find("li."+p).removeClass(p)}function a(e){n(e).find("ul."+p).removeClass(p)}function s(){var e=n(c+" "+d+" > ul."+p+" > li."+p+" > a").attr("href");n(c+" "+f+" > div."+p).removeClass(p),n(c+" "+f+" > "+e).addClass(p)}function r(e){i(c+" "+d+" ul."+p),n(e).closest("li").addClass(p),s()}function o(e){var t;t=n(e).attr("href"),i(c+" "+u),n(e).closest("li").addClass(p),a(c+" "+d),n(t).addClass(p),s()}function l(e){var t=n("#"+e+" > li."+p),i=t.prev("li"),a=t.next("li")
;i.hasClass("navigation")?i.addClass("disabled"):n("#"+e+" .navigation.btnPrevious").removeClass("disabled"),a.hasClass("navigation")?a.addClass("disabled"):n("#"+e+" .navigation.btnNext").removeClass("disabled")}var c="#the_switcher",u=".the-switcher-nav-left",d=".the-switcher-nav-right",f=".the-switcher-content",p="active";return{init:e}}),sageApp.modules.register("tabs",function(){function e(){var e=n(r);e.length&&(n(t).on("click",r+" > .nav-tabs > .btnNext",function(e){e.preventDefault(),i(e.currentTarget)}),n(t).on("click",r+" > .nav-tabs > .btnPrevious",function(e){e.preventDefault(),a(e.currentTarget)}),e.each(function(){s(n(this))}))}function i(e){var t=n(e).closest(r),i=t.find(".nav-tabs > .active").first();n(i).next("li").find("a").trigger("click"),s(t)}function a(e){var t=n(e).closest(r),i=t.find(".nav-tabs > .active").first();n(i).prev("li").find("a").trigger("click"),s(t)}function s(e){var t=e.find(".nav-tabs > .active").first(),i=n(t).prev("li"),a=n(t).next("li");i.hasClass("navigation")?i.addClass("disabled"):n(e).find(".navigation.btnPrevious").first().removeClass("disabled"),a.hasClass("navigation")?a.addClass("disabled"):n(e).find(".navigation.btnNext").first().removeClass("disabled")}var r=".tab-control-id";return{init:e}}),sageApp.modules.register("touchCarousel",function(){function e(){i.length&&t()}function t(){n(".carousel").each(function(){var e=n(this),t=new Hammer(this);t.on("swiperight",function(){e.carousel("prev")}),t.on("swipeleft",function(){e.carousel("next")})})}var i=n("div.carousel");return{init:e}}),sageApp.modules.register("ux2SideNav",function(){function e(){var e=n("#ux2_side_nav");if(e.length){var t=n("body");t.on("click","[data-drawer-nav='open']",function(i){i.preventDefault(),t.addClass("no-scroll").addClass("blur-all"),e.addClass("open")}),t.on("click","[data-drawer-nav='close']",function(i){i.preventDefault(),t.removeClass("no-scroll").removeClass("blur-all"),e.removeClass("open")}),e.on("click",".section-header",function(e){e.preventDefault(),n(this).closest(".section").toggleClass("open")})}}return{init:e}}),sageApp.modules.register("videoCarousel",function(){function e(){n(t).on("click","."+o,function(e){e.preventDefault(),i(n(this))}),n(t).on("click","."+l,function(e){e.preventDefault(),a(n(this))})}function i(e){var t=e.closest(".carousel").find(".item.active");e.closest(".carousel").addClass(c).carousel("pause"),r(t)}function a(e){s(e.closest(".carousel").find(".item.active")),e.closest(".carousel").removeClass(c).carousel("cycle")}function s(e){e.find(".videoContainer").html("")}function r(e){var t=e.attr("data-video"),i="https://www.youtube.com/embed/"+t+"?autoplay=1&controls=0&showinfo=0",n="<iframe frameborder='0' allowfullscreen='1' src='"+i+"'></iframe>";e.find(".videoContainer").html(n)}var o="video-control-play",l="video-control-stop",c="videoPlaying";return{init:e}}),sageApp.modules.register("videoPlayer",function(){function e(){function e(){var e=t.activeElement;e&&n(e).hasClass("video-iframe")&&(n(e).addClass("forced-play"),clearInterval(l),l=setInterval(r.bind(null,e),100),a(e))}function r(i){var a=t.activeElement;if(a&&n(a).hasClass("video-iframe")&&a&&a!==i){n(t).removeClass("forced-play"),n(a).addClass("forced-play"),clearInterval(l),l=setInterval(e,100);var s={event:"command",func:"pauseVideo",args:[]};n(i)[0].contentWindow.postMessage(JSON.stringify(s),"*")}}n(t).on("click","."+c,function(e){e.preventDefault(),s(),i(n(this)),n(t).find(".forced-play").removeClass("forced-play"),n(this).find("iframe.video-iframe").addClass("forced-play").focus()}),n(t).on("click",d,function(){s()}),n(t).on("click",f,function(e){e.preventDefault(),o(e.currentTarget)});var l=n(t).find(".video-container[data-hoverplay=true]").length?setInterval(e,100):"";n(t).on("mouseenter","."+c+"[data-hoverplay=true]",function(e){if(e.preventDefault(),!n(t).find(".forced-play").length)if(a(n(this)),n(this).find("iframe.video-iframe").length){var s={event:"command",func:"playVideo",args:[]};n(this).find("iframe.video-iframe")[0].contentWindow.postMessage(JSON.stringify(s),"*")}else i(n(this))}),n(t).on("mouseleave","."+c+"[data-hoverplay=true]",function(e){e.preventDefault(),n(t).find(".forced-play").length||s(n(this))})}function i(e,t){t=t>=1?t:0,e.hasClass(u)||(e.addClass(u),r(e,t))}function a(e){n(t).find("iframe.video-iframe").each(function(){if(n(this).ID!==n(e).find("iframe.video-iframe").ID){var t={event:"command",func:"pauseVideo",args:[]};n(this)[0].contentWindow.postMessage(JSON.stringify(t),"*")}})}function s(){n(t).find("iframe.video-iframe").each(function(){var e={event:"command",func:"pauseVideo",args:[]};n(this)[0].contentWindow.postMessage(JSON.stringify(e),"*")})}function r(e,t){t=t>=1?t:e.attr("data-start")>=1?e.attr("data-start"):0;var i=e.attr("data-videoid"),n=e.attr("data-autoplay")?e.attr("data-autoplay"):"0",a=e.attr("data-allowfullscreen")?e.attr("data-allowfullscreen"):"0",s=e.attr("data-related")?e.attr("data-related"):"0",r=e.attr("data-showinfo")?e.attr("data-showinfo"):"0",o=e.attr("data-showcontrols")?e.attr("data-showcontrols"):"0",l=i+"_sage_"+(new Date).getTime(),c="//www.youtube.com/embed/"+i+"?start="+t+"&autoplay="+n+"&rel="+s+"&controls="+o+"&showinfo= "+r+"&enablejsapi=1",u="<iframe class='video-iframe' id='"+l+"' frameborder='0' allowfullscreen='"+a+"' src='"+c+"'></iframe>";e.append(u)}function o(e){var t=n(e).attr("data-video-seek-time"),a=n(e).closest(l).find("."+c);t=void 0===t?0:t,n(e).closest(".video-chapters-list").find("li").removeClass("playing"),n(e).addClass("playing"),a.hasClass(u)?a.find("iframe.video-iframe").each(function(){var e={event:"command",func:"seekTo",args:[t]},i={event:"command",func:"playVideo",args:[]};n(this)[0].contentWindow.postMessage(JSON.stringify(e),"*"),n(this)[0].contentWindow.postMessage(JSON.stringify(i),"*")}):i(a,t)}var l=".content-widget.video",c="video-container",u="video-playing",d=".nav.nav-tabs > li:not(.active), .the-switcher-nav li:not(.active)",f=".video-chapters-list li:not(.playing)";return{init:e,pauseAllVideos:s}}),sageApp.modules.register("searchResults",["vueTemplates"],function(t){function s(){if(n("#search-results").length){n("body").on("click","#refine .header",function(t){t.preventDefault(),n(e).scrollTop(0),n(t.delegateTarget).addClass("facet-refine"),n(t.target).closest("#refine").addClass("open")}),n("body").on("click","#refine .back",function(t){t.preventDefault(),n(e).scrollTop(0),n(t.delegateTarget).removeClass("facet-refine"),n(t.target).closest("#refine").removeClass("open")});var s={props:["facet"],template:t.get("searchResults/facet.vue"),methods:{resetOption:function(){this.facet.appliedOptionId=null},setOption:function(e){this.facet.appliedOptionId=e.id}},computed:{isOptionApplied:function(){return null!==this.facet.appliedOptionId},appliedOption:function(){for(var e=this.facet,t=0;t<e.options.length;t++)if(e.options[t].id===e.appliedOptionId)return e.options[t]}}},o={props:["facets","paging"],template:t.get("searchResults/facets.vue"),components:{facet:s},computed:{isResetVisible:function(){return a.some(this.facets,function(e){return null!==e.appliedOptionId})}},methods:{clearFacets:function(){a.each(this.facets,function(e){e.appliedOptionId=null})}}},l={props:["result"],template:t.get("searchResults/promotedResult.vue"),computed:{hasPrice:function(){return a.isString(this.result.price)&&""!==this.result.price},hasCategories:function(){return a.isArray(this.result.categories)&&this.result.categories.length},hasDescription:function(){return a.isString(this.result.description)&&""!==this.result.description},hasActions:function(){return a.isArray(this.result.actions)&&this.result.actions.length}}},c={props:["result"],template:t.get("searchResults/result.vue"),computed:{hasCategories:function(){return a.isArray(this.result.categories)&&this.result.categories.length},hasDescription:function(){return a.isString(this.result.description)&&""!==this.result.description}}},u={props:["results","bestBets"],template:t.get("searchResults/results.vue"),components:{promotedResult:l,result:c},computed:{hasPromotedResults:function(){return a.isArray(this.bestBets)&&this.bestBets.length}}},d={props:["collections"],template:t.get("searchResults/collections.vue")},f=(t.get("searchResults/paging.vue"),new i({el:"#search-results",components:{collections:d,facets:o,results:u},data:{collections:[],facets:[],results:[],bestBets:[],paging:{hits:0,currentPage:1,perPage:10}},methods:{newSearch:function(){},refineSearch:function(){}}}));f.results=r.results,f.bestBets=r.bestBets,f.collections=r.collections,f.facets=r.facets,f.paging.hits=r.paging.hits}}var r={paging:{hits:33},collections:[{title:"Solutions"},{title:"Products"}],facets:[{id:"facetGuid1",title:"facet 1",appliedOptionId:"optionguid2",options:[{id:"optionguid1",title:"Category 1",hits:11},{id:"optionguid2",title:"Category 2",hits:22},{id:"optionguid3",title:"Category 3",hits:33}]},{id:"facetGuid2",title:"facet 2",appliedOptionId:null,options:[{id:"optionguid4",title:"Category 4",hits:44},{id:"optionguid5",title:"Category 5",hits:55}]},{id:"facetGuid3",title:"facet 3",appliedOptionId:null,options:[{id:"optionguid6",title:"Category 6",hits:66},{id:"optionguid7",title:"Category 7",hits:77},{id:"optionguid8",title:"Category 8",hits:88}]}],bestBets:[{title:"Sage One for Accountants",price:"From $15/month",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque tempor massa a ante ultricies, eu bibendum nulla laoreet. Aenean in ex eu elit aliquet mollis vitae id ex.",categories:[{title:"Category"},{title:"Subcategory"}],url:"/",actions:[{title:"Buy now",url:"#"}],tags:["tag1","tag2","tag3"],isBestBet:!0}],results:[{title:"Test 1",price:"$15/month",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque tempor massa a ante ultricies, eu bibendum nulla laoreet. Aenean in ex eu elit aliquet mollis vitae id ex.",categories:[{title:"Category"},{title:"Subcategory"}],url:"/",actions:[{title:"Click me!",url:"#"},{title:"No, me!",url:"#"}],tags:["tag1","tag2","tag3"]},{title:"Test 2",description:null,url:"/",actions:null,tags:null},{title:"Test 3",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque tempor massa a ante ultricies, eu bibendum nulla laoreet. Aenean in ex eu elit aliquet mollis vitae id ex.",categories:[{title:"Category"},{title:"Subcategory"}],url:"/",actions:null,tags:["tag6","tag7","tag8"]},{title:"Test 4",price:"$15/month",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque tempor massa a ante ultricies, eu bibendum nulla laoreet. Aenean in ex eu elit aliquet mollis vitae id ex.",categories:[{title:"Category"},{title:"Subcategory"}],url:"/",actions:[{title:"Click me!",url:"#"},{title:"No, me!",url:"#"}],tags:["tag1","tag2","tag3"]},{title:"Test 5",description:null,url:"/",actions:null,tags:null},{title:"Test 6",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque tempor massa a ante ultricies, eu bibendum nulla laoreet. Aenean in ex eu elit aliquet mollis vitae id ex.",categories:[{title:"Category"},{title:"Subcategory"}],url:"/",actions:null,tags:["tag6","tag7","tag8"]}]};return{init:s}}),sageApp.services.register("typeAheadFactory",["search","vueTemplates"],function(e,t){function n(e,n){n=n||{},n.searchTerm=a.isUndefined(n.searchTerm)?"":n.searchTerm.replace(/[{}]+/gi,""),n.isInitiallyVisible=!!a.isUndefined(n.isInitiallyVisible)||n.isInitiallyVisible;var o={props:["isPristine","isAvailable","searchTerm","searchFor"],template:t.get("typeAhead/typeAhead.vue"),data:function(){return{currentPromise:null,suggestedSearches:[],autoCompletions:[],suggestedProducts:[]}},methods:{highlightSearchTerm:function(e){if(a.isUndefined(e))return"";var t=new RegExp("("+r(this.searchTerm)+")","i");return e.replace(t,"<strong>$1</strong>")}},computed:{isVisible:function(){return this.isAvailable&&(this.areSuggestedSearchesVisible||this.areAutoCompletionsVisible||this.areSuggestedProductsVisible)},isBusy:function(){return null!==this.currentPromise},areSuggestedSearchesVisible:function(){return""===this.searchTerm&&this.suggestedSearches.length},areAutoCompletionsVisible:function(){return""!==this.searchTerm&&this.autoCompletions.length},areSuggestedProductsVisible:function(){return""!==this.searchTerm&&this.suggestedProducts.length}},watch:{searchTerm:a.debounce(function(e){s(this,e)},300),isPristine:function(){s(this,this.searchTerm)}}};return new i({el:e,components:{typeAhead:o},data:{isVisible:n.isInitiallyVisible,isPristine:!0,isFocused:!1,searchTerm:n.searchTerm},computed:{isTypeAheadAvailable:function(){return this.isVisible&&this.isFocused}},watch:{isVisible:function(e){e?this.onShow():this.onHide()}},methods:{searchFor:function(e){var t=this;t.searchTerm=e,i.nextTick(function(){t.$el.getElementsByTagName("form")[0].submit()})},onFocus:function(){this.isFocused=!0,this.isPristine&&(this.isPristine=!1)},onBlur:function(){var e=this;setTimeout(function(){e.isFocused=!1},250)},onShow:function(){},onHide:function(){},onSubmit:function(e){""===this.searchTerm&&e.preventDefault()}}})}function s(t,i){var n;n=""===i?e.getSuggestedSearches():e.getAutoCompleteResults(i),n.then(function(e){t.currentPromise===n&&(t.suggestedSearches=e.suggestions||[],t.autoCompletions=e.autoCompletions||[],t.suggestedProducts=e.suggestedProducts||[],t.currentPromise=null)}),t.currentPromise=n}function r(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}return{create:n}})}(window,document,Vue,jQuery,_,Q);
//# sourceMappingURL=sage.min.js.map
